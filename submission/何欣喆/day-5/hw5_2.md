# 答题卡

## 1 总训练时间与理想时间

### 1.1
推导：
    前向过程：根据阶梯式错开的流水线运行逻辑，耗时应当为 $t_f * (m + p - 1)$
    反向过程：类似，耗时应当为 $t_b * (m + p - 1)$
    综上，总耗时应当为：$(t_b + t_f) * (m + p - 1)$

代入计算得到：$66 \text{ms}$

### 1.2
代入得到： $48 \text{ms}$

### 1.3
$\text{Bubble Ratio} = 1.375$

## 2 若将 microbatch 数增加为 $$m = 16$$，bubble ratio 会如何变化？请分析并说明原因
会变小，更接近 1。
原因：
    直观上，m 增大将使流水线启动后密集执行的阶段更长，使得气泡减少。
    计算上，因为 $\text{Bubble Ratio} = \frac{m + p - 1}{m} = 1 + \frac{p - 1}{m}$，所以结果显然。

## 3. 与 Gpipe 相比，1F1B 调度策略在哪些方面优化了流水线利用率？
1F1B 通过重叠前向过程和反向过程，可以在同样的启动成本（即相同的 bubble times）下更快地填满流水线。紧随前向之后就执行反向意味着激活的 micro batch 更少，这意味着 1F1B 可以用同样的内存处理更多的 micro batch。这使得流水线的吞吐量更高，并且通信开销减少。
